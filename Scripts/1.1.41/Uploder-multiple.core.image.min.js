function multipleFiles_addMode(){$(".CreateLink").hide();Init_Multiple_Upload()}function Init_Multiple_Upload(){$("#UploadedFiles").change(function(n){MultiplefileSelected(n)});$("#FormMultipleUpload button[id=Cancel_btn]").click(function(){Cancel_btn_handler()});$("#FormMultipleUpload button[id=Submit_btn]").click(function(){UploadMultipleFiles()});var n=document.getElementById("drop_zone");n.addEventListener("dragover",handleDragOver,!1);n.addEventListener("drop",MultiplefileSelected,!1);n.addEventListener("dragenter",dragenterHandler,!1);n.addEventListener("dragleave",dragleaveHandler,!1);$.blockUI.defaults.overlayCSS={backgroundColor:"#000",opacity:.6};$.blockUI.defaults.css={padding:0,margin:5,width:"60%",top:"30%",left:"20%",color:"#000",border:"3px solid #aaa",backgroundColor:"#ccc"};$.blockUI({message:$("#createView")})}function MultiplefileSelected(n){if(n.stopPropagation(),n.preventDefault(),$("#drop_zone").removeClass("hover"),selectedFiles=n.target.files||n.dataTransfer.files,selectedFiles){$("#Files").empty();for(var t=0;t<selectedFiles.length;t++)DataURLFileReader.read(selectedFiles[t],function(n,i){var r;n!=null?(r='<div id="File_'+t+'" class="info"><div class="InfoContainer"><div class="Error">'+n+'<\/div><div data-name="FileName" class="info">'+i.name+'<\/div><div data-type="FileType" class="info">'+i.type+'<\/div><div data-size="FileSize" class="info">'+i.size()+"<\/div><\/div><hr/><\/div>",$("#Files").append(r)):(r='<div id="File_'+t+'" class="info"><div class="InfoContainer"><div data-name="FileName" class="info">'+i.name+'<\/div><div data-type="FileType" class="info">'+i.type+'<\/div><div data-size="FileSize" class="info">'+i.size()+"<\/div><\/div><hr/><\/div>",$("#Files").append(r))})}}function UploadMultipleFiles(){var t=new FormData,i=document.getElementById("trainingid").value,n;for(t.append("Id",i),n=0;n<selectedFiles.length;n++)t.append("uploadedFiles",selectedFiles[n]);$.ajax({url:"/AdministrerHtml/UplodMultiple",type:"POST",xhr:function(){var n=$.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",progressHandlingFunction,!1),n},success:successHandler,error:errorHandler,complete:completeHandler,data:t,cache:!1,contentType:!1,processData:!1})}function handleDragOver(n){n.preventDefault();n.dataTransfer.effectAllowed="copy";n.dataTransfer.dropEffect="copy"}function dragenterHandler(){$("#drop_zone").addClass("hover")}function dragleaveHandler(){$("#drop_zone").removeClass("hover")}var selectedFiles,DataURLFileReader={read:function(n,t){var i=new FileReader,r={name:n.name,type:n.type,fileContent:null,size:function(){return n.size>1048576?Math.round(n.size*100/1048576)/100+" MB":n.size>1024?Math.round(n.size*100/1024)/100+" KB":n.size+" bytes"}};i.onload=function(){r.fileContent=i.result;t(null,r)};i.onerror=function(){t(i.error,r)};i.readAsDataURL(n)}}