(function(n){function t(t){var f=n(this),r=null,u=[],e=null,o=null,i=n.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:n.noop,exit:n.noop,activate:n.noop,deactivate:n.noop,exitMenu:n.noop},t),c=3,l=300,a=function(n){u.push({x:n.pageX,y:n.pageY});u.length>c&&u.shift()},v=function(){o&&clearTimeout(o);i.exitMenu(this)&&(r&&i.deactivate(r),r=null)},y=function(){o&&clearTimeout(o);i.enter(this);h(this)},p=function(){i.exit(this)},w=function(){s(this)},s=function(n){n!=r&&(r&&i.deactivate(r),i.activate(n),r=n)},h=function(n){var t=b();t?o=setTimeout(function(){h(n)},t):s(n)},b=function(){function v(n,t){return(t.y-n.y)/(t.x-n.x)}var h,c;if(!r||!n(r).is(i.submenuSelector))return 0;var t=f.offset(),y={x:t.left,y:t.top-i.tolerance},w={x:t.left+f.outerWidth(),y:y.y},p={x:t.left,y:t.top+f.outerHeight()+i.tolerance},a={x:t.left+f.outerWidth(),y:p.y},s=u[u.length-1],o=u[0];if(!s||(o||(o=s),o.x<t.left||o.x>a.x||o.y<t.top||o.y>a.y)||e&&s.x==e.x&&s.y==e.y)return 0;h=w;c=a;i.submenuDirection=="left"?(h=p,c=y):i.submenuDirection=="below"?(h=a,c=p):i.submenuDirection=="above"&&(h=y,c=w);var b=v(s,h),k=v(s,c),d=v(o,h),g=v(o,c);return b<d&&k>g?(e=s,l):(e=null,0)};f.mouseleave(v).find(i.rowSelector).mouseenter(y).mouseleave(p).click(w);n(document).mousemove(a)}n.fn.menuAim=function(n){return this.each(function(){t.call(this,n)}),this}})(jQuery)