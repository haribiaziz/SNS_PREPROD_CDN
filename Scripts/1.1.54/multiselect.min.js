if(typeof jQuery=="undefined")throw new Error("multiselect requires jQuery");(function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<7)throw new Error("multiselect requires jQuery version 1.7 or higher")})(jQuery),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";var r=function(n){function t(t,i){var r=t.prop("id");this.$left=t;this.$right=n(i.right).length?n(i.right):n("#"+r+"_to");this.actions={$leftAll:n(i.leftAll).length?n(i.leftAll):n("#"+r+"_leftAll"),$rightAll:n(i.rightAll).length?n(i.rightAll):n("#"+r+"_rightAll"),$leftSelected:n(i.leftSelected).length?n(i.leftSelected):n("#"+r+"_leftSelected"),$rightSelected:n(i.rightSelected).length?n(i.rightSelected):n("#"+r+"_rightSelected"),$undo:n(i.undo).length?n(i.undo):n("#"+r+"_undo"),$redo:n(i.redo).length?n(i.redo):n("#"+r+"_redo"),$moveUp:n(i.moveUp).length?n(i.moveUp):n("#"+r+"_move_up"),$moveDown:n(i.moveDown).length?n(i.moveDown):n("#"+r+"_move_down")};delete i.leftAll;delete i.leftSelected;delete i.right;delete i.rightAll;delete i.rightSelected;delete i.undo;delete i.redo;delete i.moveUp;delete i.moveDown;this.options={keepRenderingSort:i.keepRenderingSort,submitAllLeft:i.submitAllLeft!==undefined?i.submitAllLeft:!0,submitAllRight:i.submitAllRight!==undefined?i.submitAllRight:!0,search:i.search,ignoreDisabled:i.ignoreDisabled!==undefined?i.ignoreDisabled:!1,matchOptgroupBy:i.matchOptgroupBy!==undefined?i.matchOptgroupBy:"label"};delete i.keepRenderingSort;i.submitAllLeft;i.submitAllRight;i.search;i.ignoreDisabled;i.matchOptgroupBy;this.callbacks=i;this.init()}return t.prototype={init:function(){var t=this;t.undoStack=[];t.redoStack=[];t.options.keepRenderingSort&&(t.skipInitSort=!0,t.callbacks.sort!==!1&&(t.callbacks.sort=function(t,i){return n(t).data("position")>n(i).data("position")?1:-1}),t.$left.attachIndex(),t.$right.each(function(t,i){n(i).attachIndex()}));typeof t.callbacks.startUp=="function"&&t.callbacks.startUp(t.$left,t.$right);t.skipInitSort||typeof t.callbacks.sort!="function"||(t.$left.mSort(t.callbacks.sort),t.$right.each(function(i,r){n(r).mSort(t.callbacks.sort)}));t.options.search&&t.options.search.left&&(t.options.search.$left=n(t.options.search.left),t.$left.before(t.options.search.$left));t.options.search&&t.options.search.right&&(t.options.search.$right=n(t.options.search.right),t.$right.before(n(t.options.search.$right)));t.events()},events:function(){var t=this;if(t.options.search&&t.options.search.$left)t.options.search.$left.on("keyup",function(){if(t.callbacks.fireSearch(this.value))var i=t.$left.find('option:search("'+this.value+'")').mShow(),r=t.$left.find('option:not(:search("'+this.value+'"))').mHide(),u=t.$left.find("option.hidden").parent("optgroup").not(n(":visible").parent()).mHide(),f=t.$left.find("option:not(.hidden)").parent("optgroup").mShow();else t.$left.find("option,optgroup").mShow()});if(t.options.search&&t.options.search.$right)t.options.search.$right.on("keyup",function(){if(t.callbacks.fireSearch(this.value))var i=t.$right.find('option:search("'+this.value+'")').mShow(),r=t.$right.find('option:not(:search("'+this.value+'"))').mHide(),u=t.$right.find("option.hidden").parent("optgroup").not(n(":visible").parent()).mHide(),f=t.$right.find("option:not(.hidden)").parent("optgroup").mShow();else t.$right.find("option,optgroup").mShow()});t.$right.closest("form").on("submit",function(){t.$left.find("option").prop("selected",t.options.submitAllLeft);t.$right.find("option").prop("selected",t.options.submitAllRight)});t.$left.on("dblclick","option",function(n){n.preventDefault();var i=t.$left.find("option:selected");i.length&&t.moveToRight(i,n)});t.$left.on("keypress",function(n){if(n.keyCode===13){n.preventDefault();var i=t.$left.find("option:selected");i.length&&t.moveToRight(i,n)}});t.$right.on("dblclick","option",function(n){n.preventDefault();var i=t.$right.find("option:selected");i.length&&t.moveToLeft(i,n)});t.$right.on("keydown",function(n){if(n.keyCode===8||n.keyCode===46){n.preventDefault();var i=t.$right.find("option:selected");i.length&&t.moveToLeft(i,n)}});(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.indexOf("Trident/")>0||navigator.userAgent.indexOf("Edge/")>0)&&(t.$left.dblclick(function(){t.actions.$rightSelected.trigger("click")}),t.$right.dblclick(function(){t.actions.$leftSelected.trigger("click")}));t.actions.$rightSelected.on("click",function(i){i.preventDefault();var r=t.$left.find("option:selected");r.length&&t.moveToRight(r,i);n(this).blur()});t.actions.$leftSelected.on("click",function(i){i.preventDefault();var r=t.$right.find("option:selected");r.length&&t.moveToLeft(r,i);n(this).blur()});t.actions.$rightAll.on("click",function(i){i.preventDefault();var r=t.$left.children(":not(span):not(.hidden)");r.length&&t.moveToRight(r,i);n(this).blur()});t.actions.$leftAll.on("click",function(i){i.preventDefault();var r=t.$right.children(":not(span):not(.hidden)");r.length&&t.moveToLeft(r,i);n(this).blur()});t.actions.$undo.on("click",function(n){n.preventDefault();t.undo(n)});t.actions.$redo.on("click",function(n){n.preventDefault();t.redo(n)});t.actions.$moveUp.on("click",function(i){i.preventDefault();t.doNotSortRight=!0;var r=t.$right.find(":selected:not(span):not(.hidden)");r.first().prev().before(r);n(this).blur()});t.actions.$moveDown.on("click",function(i){i.preventDefault();t.doNotSortRight=!0;var r=t.$right.find(":selected:not(span):not(.hidden)");r.last().next().after(r);n(this).blur()})},moveToRight:function(n,t,i,r){var u=this;return typeof u.callbacks.moveToRight=="function"?u.callbacks.moveToRight(u,n,t,i,r):typeof u.callbacks.beforeMoveToRight=="function"&&!i&&!u.callbacks.beforeMoveToRight(u.$left,u.$right,n)?!1:(u.moveFromAtoB(u.$left,u.$right,n,t,i,r),r||(u.undoStack.push(["right",n]),u.redoStack=[]),typeof u.callbacks.sort!="function"||i||u.doNotSortRight||u.$right.mSort(u.callbacks.sort),typeof u.callbacks.afterMoveToRight!="function"||i||u.callbacks.afterMoveToRight(u.$left,u.$right,n),u)},moveToLeft:function(n,t,i,r){var u=this;return typeof u.callbacks.moveToLeft=="function"?u.callbacks.moveToLeft(u,n,t,i,r):typeof u.callbacks.beforeMoveToLeft=="function"&&!i&&!u.callbacks.beforeMoveToLeft(u.$left,u.$right,n)?!1:(u.moveFromAtoB(u.$right,u.$left,n,t,i,r),r||(u.undoStack.push(["left",n]),u.redoStack=[]),typeof u.callbacks.sort!="function"||i||u.$left.mSort(u.callbacks.sort),typeof u.callbacks.afterMoveToLeft!="function"||i||u.callbacks.afterMoveToLeft(u.$left,u.$right,n),u)},moveFromAtoB:function(t,i,r){var u=this;return r.each(function(t,r){var f=n(r);if(u.options.ignoreDisabled&&f.is(":disabled"))return!0;if(f.is("optgroup")||f.parent().is("optgroup")){var o=f.is("optgroup")?f:f.parent(),s="optgroup["+u.options.matchOptgroupBy+'="'+o.prop(u.options.matchOptgroupBy)+'"]',e=i.find(s);e.length||(e=o.clone(!0),e.empty(),i.move(e));f.is("optgroup")?e.move(f.find("option")):e.move(f);o.removeIfEmpty()}else i.move(f)}),u},undo:function(n){var i=this,t=i.undoStack.pop();if(t){i.redoStack.push(t);switch(t[0]){case"left":i.moveToRight(t[1],n,!1,!0);break;case"right":i.moveToLeft(t[1],n,!1,!0)}}},redo:function(n){var i=this,t=i.redoStack.pop();if(t){i.undoStack.push(t);switch(t[0]){case"left":i.moveToLeft(t[1],n,!1,!0);break;case"right":i.moveToRight(t[1],n,!1,!0)}}}},t}(n),t,i;n.multiselect={defaults:{startUp:function(t,i){i.find("option").each(function(i,r){var u,f;n(r).parent().prop("tagName")=="OPTGROUP"?(u='optgroup[label="'+n(r).parent().attr("label")+'"]',t.find(u+' option[value="'+r.value+'"]').each(function(n,t){t.remove()}),t.find(u).removeIfEmpty()):(f=t.find('option[value="'+r.value+'"]'),f.remove())})},beforeMoveToRight:function(){return!0},afterMoveToRight:function(){},beforeMoveToLeft:function(){return!0},afterMoveToLeft:function(){},sort:function(n,t){return n.innerHTML=="NA"?1:t.innerHTML=="NA"?-1:n.innerHTML>t.innerHTML?1:-1},fireSearch:function(n){return n.length>1}}};t=window.navigator.userAgent;i=t.indexOf("MSIE ")+t.indexOf("Trident/")+t.indexOf("Edge/")>-3;n.fn.multiselect=function(t){return this.each(function(){var i=n(this),u=i.data("crlcu.multiselect"),f=n.extend({},n.multiselect.defaults,i.data(),typeof t=="object"&&t);u||i.data("crlcu.multiselect",u=new r(i,f))})};n.fn.move=function(n){return this.append(n).find("option").prop("selected",!1),this};n.fn.removeIfEmpty=function(){return this.children().length||this.remove(),this};n.fn.mShow=function(){return this.removeClass("hidden").show(),i&&this.each(function(t,i){n(i).parent().is("span")&&n(i).parent().replaceWith(i);n(i).show()}),this};n.fn.mHide=function(){return this.addClass("hidden").hide(),i&&this.each(function(t,i){n(i).parent().is("span")||n(i).wrap("<span>").hide()}),this};n.fn.mSort=function(t){return this.children().sort(t).appendTo(this),this.find("optgroup").each(function(i,r){n(r).children().sort(t).appendTo(r)}),this};n.fn.attachIndex=function(){this.children().each(function(t,i){var r=n(i);r.is("optgroup")&&r.children().each(function(t,i){n(i).data("position",t)});r.data("position",t)})};n.expr[":"].search=function(t,i,r){var u=new RegExp(r[3],"i");return n(t).text().match(u)}})