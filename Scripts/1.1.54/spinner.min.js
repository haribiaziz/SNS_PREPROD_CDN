var Spinner=function(n,t){this.$element=$(n);this.options=$.extend({},$.fn.spinner.defaults,t);this.$input=this.$element.find(".spinner-input");this.$element.on("keyup",this.$input,$.proxy(this.change,this));if(this.options.hold){this.$element.on("mousedown",".spinner-up",$.proxy(function(){this.startSpin(!0)},this));this.$element.on("mouseup",".spinner-up,.spinner-down",$.proxy(this.stopSpin,this));this.$element.on("mouseout",".spinner-up,.spinner-down",$.proxy(this.stopSpin,this));this.$element.on("mousedown",".spinner-down",$.proxy(function(){this.startSpin(!1)},this))}else{this.$element.on("click",".spinner-up",$.proxy(function(){this.step(!0)},this));this.$element.on("click",".spinner-down",$.proxy(function(){this.step(!1)},this))}this.switches={count:1,enabled:!0};this.switches.speed=this.options.speed==="medium"?300:this.options.speed==="fast"?100:500;this.lastValue=null;this.render();this.options.disabled&&this.disable()};Spinner.prototype={constructor:Spinner,render:function(){var n=this.$input.val();n?this.value(n):this.$input.val(this.options.value);this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var n=this.$input.val();n/1?this.options.value=n/1:(n=n.replace(/[^0-9]/g,"")||"",this.$input.val(n),this.options.value=n/1);this.triggerChangedEvent()},stopSpin:function(){this.switches.timeout!==undefined&&(clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent())},triggerChangedEvent:function(){var n=this.value();n!==this.lastValue&&(this.lastValue=n,this.$element.trigger("changed",n),this.$element.trigger("change"))},startSpin:function(n){if(!this.options.disabled){var t=this.switches.count;t===1?(this.step(n),t=1):t=t<3?1.5:t<8?2.5:4;this.switches.timeout=setTimeout($.proxy(function(){this.iterator(n)},this),this.switches.speed/t);this.switches.count++}},iterator:function(n){this.step(n);this.startSpin(n)},step:function(n){var r=this.options.value,i=n?this.options.max:this.options.min,f,u,t,e;(n?r<i:r>i)?(t=r+(n?1:-1)*this.options.step,this.options.step%1!=0&&(f=(this.options.step+"").split(".")[1].length,u=Math.pow(10,f),t=Math.round(t*u)/u),(n?t>i:t<i)?this.value(i):this.value(t)):this.options.cycle&&(e=n?this.options.min:this.options.max,this.value(e))},value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)?(n=parseFloat(n),this.options.value=n,this.$input.val(n),this):this.options.value},disable:function(){this.options.disabled=!0;this.$input.attr("disabled","");this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1;this.$input.removeAttr("disabled");this.$element.find("button").removeClass("disabled")}};$.fn.spinner=function(n){var i=Array.prototype.slice.call(arguments,1),t,r=this.each(function(){var u=$(this),r=u.data("spinner"),f=typeof n=="object"&&n;r||u.data("spinner",r=new Spinner(this,f));typeof n=="string"&&(t=r[n].apply(r,i))});return t===undefined?r:t};$.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:!0,speed:"medium",disabled:!1};$.fn.spinner.Constructor=Spinner;$.fn.spinner.noConflict=function(){return $.fn.spinner=old,this};$(function(){$("body").on("mousedown.spinner.data-api",".spinner",function(){var n=$(this);n.data("spinner")||n.spinner(n.data())})})